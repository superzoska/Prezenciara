<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Szczeg√≥≈Çy produktu</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #fff5f8;
    color: #111;
  }
  header {
    background: #fbb6c1;
    padding: 1rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    position: sticky;
    top: 0;
    z-index: 1000;
    cursor: default;
  }
  header img, header h1 {
    cursor: pointer;
  }
  header img {
    width: 48px;
    height: 48px;
    border-radius: 8px;
    object-fit: cover;
  }
  header h1 {
    margin: 0;
    color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-weight: 700;
    font-size: 1.5rem;
  }
  #cart-icon {
    position: fixed;
    top: 1rem;
    right: 1rem;
    background: #e75480;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    color: white;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    box-shadow: 0 2px 6px rgba(0,0,0,0.25);
  }
  #cart-count {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #333;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    font-size: 12px;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  main {
    max-width: 700px;
    margin: 2rem auto;
    padding: 0 1rem;
    text-align: center;
  }
  main img {
    width: 100%;
    max-width: 400px;
    border-radius: 12px;
    object-fit: cover;
  }
  main h2 {
    margin: 1rem 0 0.5rem;
    color: #e75480;
  }
  main p {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }
  main .price {
    font-weight: 700;
    font-size: 1.3rem;
    color: #d0436b;
    margin-bottom: 1rem;
  }
  #add-to-cart-btn {
    background: #e75480;
    color: white;
    border: none;
    padding: 0.7rem 1.5rem;
    font-size: 1.1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #add-to-cart-btn:hover {
    background: #d0436b;
  }
  /* Modal koszyka */
  #cart-modal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 3000;
  }
  #cart-modal.active {
    display: flex;
  }
  #cart-content {
    background: white;
    width: 90%;
    max-width: 480px;
    border-radius: 10px;
    padding: 1rem 1.5rem 2rem;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    position: relative;
  }
  #cart-content h2 {
    margin-top: 0;
    color: #e75480;
  }
  #cart-content .close-btn {
    position: absolute;
    right: 1rem;
    top: 1rem;
    font-size: 24px;
    color: #e75480;
    cursor: pointer;
  }
  .cart-item {
    display: flex;
    margin-bottom: 1rem;
    gap: 0.7rem;
    align-items: center;
  }
  .cart-item img {
    width: 60px;
    height: 60px;
    border-radius: 6px;
    object-fit: cover;
  }
  .cart-item-details {
    flex: 1;
  }
  .cart-item-details h4 {
    margin: 0 0 0.2rem;
  }
  .cart-item-details .price {
    font-weight: 600;
    color: #e75480;
  }
  .cart-item-remove {
    cursor: pointer;
    color: #999;
    font-size: 20px;
    user-select: none;
  }
  #cart-message {
    width: 100%;
    margin-top: 1rem;
    min-height: 70px;
    padding: 0.5rem;
    border-radius: 6px;
    border: 1px solid #ddd;
    resize: vertical;
    font-family: inherit;
    font-size: 14px;
  }
  #checkout-btn {
    background: #e75480;
    color: white;
    border: none;
    padding: 0.75rem 1rem;
    font-size: 1.1rem;
    font-weight: 700;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 1rem;
    width: 100%;
    transition: background 0.3s ease;
  }
  #checkout-btn:hover:not(:disabled) {
    background: #d0436b;
  }
  #checkout-btn:disabled {
    background: #ddd;
    cursor: not-allowed;
  }
</style>
</head>
<body>
<header>
  <img src="zdjƒôcia/logo.jpeg" alt="Logo Twojej Marki" id="logo" />
  <h1 id="shop-name">Prezenciara</h1>
</header>
<button onclick="window.location.href='index.html'" style="
  position: fixed;
  top: 5.5rem;
  left: 1rem;
  background: #e75480;
  color: white;
  border: none;
  padding: 0.4rem 1rem 0.4rem 0.8rem;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 30px;
  cursor: pointer;
  z-index: 5000;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  gap: 0.4rem;
">
  <span style="font-size: 1.2rem;">‚Üê</span> Cofnij
</button>


<div id="cart-icon" aria-label="Koszyk" role="button" tabindex="0">
  üõí
  <div id="cart-count">0</div>
</div>

<main id="product-detail">
  <!-- Szczeg√≥≈Çy produktu siƒô tutaj pojawiƒÖ -->
</main>

<!-- Modal koszyka -->
<div id="cart-modal" role="dialog" aria-modal="true" aria-labelledby="cart-title">
  <div id="cart-content">
    <span class="close-btn" id="close-cart" aria-label="Zamknij koszyk">&times;</span>
    <h2 id="cart-title">Tw√≥j koszyk</h2>
    <div id="cart-items"></div>
    <textarea id="cart-message" placeholder="Dodaj wiadomo≈õƒá do zam√≥wienia..."></textarea>
    <button id="checkout-btn" disabled>Zap≈Çaƒá z PayU</button>
  </div>
</div>

<script>
  // Lista produkt√≥w
  const products = [
    { id: 'p1', name: 'Ma≈Çy pakiet', desc: 'Opis produktu Ma≈Çy pakiet - idealny na drobny prezent.', price: 60.00, img: 'zdjƒôcia/bukiet-prezentowy-na-18-urodziny.png' },
    { id: 'p2', name: '≈öredni pakiet', desc: '≈öredni pakiet z r√≥≈ºnymi s≈Çodko≈õciami.', price: 100.00, img: 'zdjƒôcia/bukiet-prezentowy-na-18-urodziny.png' },
    { id: 'p3', name: 'Du≈ºy pakiet', desc: 'Du≈ºy pakiet na specjalne okazje.', price: 150.00, img: 'zdjƒôcia/bukiet-prezentowy-na-18-urodziny.png' },
    { id: 'p4', name: 'Upominek', desc: 'Drobny upominek dla wsp√≥≈Çpracownika lub znajomego.', price: 30.00, img: 'zdjƒôcia/bukiet-prezentowy-na-18-urodziny.png' },
    { id: 'p5', name: 'S≈Çodki bukiet', desc: 'S≈Çodki bukiet na ka≈ºdƒÖ okazjƒô.', price: 150.00, img: 'zdjƒôcia/bukiet-prezentowy-na-18-urodziny.png' },
  ];

  const productDetail = document.getElementById('product-detail');
  const cartCount = document.getElementById('cart-count');
  const cartIcon = document.getElementById('cart-icon');
  const logo = document.getElementById('logo');
  const shopName = document.getElementById('shop-name');
  const cartModal = document.getElementById('cart-modal');
  const closeCartBtn = document.getElementById('close-cart');
  const cartItemsContainer = document.getElementById('cart-items');
  const cartMessage = document.getElementById('cart-message');
  const checkoutBtn = document.getElementById('checkout-btn');

  // Koszyk
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  // Aktualizuj licznik koszyka
  function updateCartCount() {
    const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
    cartCount.textContent = totalQty;
    checkoutBtn.disabled = totalQty === 0;
  }

  // Renderuj produkt
  const urlParams = new URLSearchParams(window.location.search);
  const productId = urlParams.get('id');
  const product = products.find(p => p.id === productId);

  if (!product) {
    productDetail.innerHTML = '<p>Nie znaleziono produktu.</p>';
  } else {
    productDetail.innerHTML = `
      <img src="${product.img}" alt="${product.name}" />
      <h2>${product.name}</h2>
      <p>${product.desc}</p>
      <div class="price">${product.price.toFixed(2)} z≈Ç</div>
      <button id="add-to-cart-btn">Dodaj do koszyka</button>
    `;

    document.getElementById('add-to-cart-btn').addEventListener('click', () => {
      const index = cart.findIndex(item => item.id === product.id);
      if (index === -1) {
        cart.push({ id: product.id, qty: 1 });
      } else {
        cart[index].qty++;
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      alert(`Dodano "${product.name}" do koszyka`);
    });
  }

  // Renderuj zawarto≈õƒá koszyka w modalu
  function renderCart() {
    cartItemsContainer.innerHTML = '';
    if (cart.length === 0) {
      cartItemsContainer.innerHTML = '<p>Tw√≥j koszyk jest pusty.</p>';
      checkoutBtn.disabled = true;
      return;
    }
    for (const item of cart) {
      const prod = products.find(p => p.id === item.id);
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <img src="${prod.img}" alt="${prod.name}" />
        <div class="cart-item-details">
          <h4>${prod.name}</h4>
          <div>Ilo≈õƒá: ${item.qty}</div>
          <div class="price">${(prod.price * item.qty).toFixed(2)} z≈Ç</div>
        </div>
        <div class="cart-item-remove" data-id="${item.id}" aria-label="Usu≈Ñ produkt">&times;</div>
      `;
      cartItemsContainer.appendChild(div);
    }
  }

  // Usuwanie produktu z koszyka
  cartItemsContainer.addEventListener('click', e => {
    if (e.target.classList.contains('cart-item-remove')) {
      const id = e.target.dataset.id;
      cart = cart.filter(item => item.id !== id);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      renderCart();
    }
  });

  // Otw√≥rz modal koszyka
  cartIcon.addEventListener('click', () => {
    renderCart();
    cartModal.classList.add('active');
  });

  // Zamknij modal koszyka
  closeCartBtn.addEventListener('click', () => {
    cartModal.classList.remove('active');
  });

  // Przycisk zap≈Çaƒá ‚Äî generuje maila z tre≈õciƒÖ zam√≥wienia
  checkoutBtn.addEventListener('click', () => {
    if (cart.length === 0) return alert('Koszyk jest pusty!');
    const message = encodeURIComponent(cartMessage.value.trim());
    let orderDetails = 'Zam√≥wienie:%0D%0A';
    let total = 0;
    for (const item of cart) {
      const prod = products.find(p => p.id === item.id);
      const line = `${prod.name} x${item.qty} = ${(prod.price * item.qty).toFixed(2)} z≈Ç`;
      orderDetails += line + '%0D%0A';
      total += prod.price * item.qty;
    }
    orderDetails += `\nRazem: ${total.toFixed(2)} z≈Ç%0D%0A\nWiadomo≈õƒá od klienta:%0D%0A${message}`;

    const mailtoLink = `mailto:prezenciara.pl@gmail.com?subject=Nowe zam√≥wienie&body=${orderDetails}`;
    window.location.href = mailtoLink;
  });

  // Klikniƒôcie w logo lub nazwƒô - przekierowanie na index.html
  logo.addEventListener('click', () => window.location.href = 'index.html');
  shopName.addEventListener('click', () => window.location.href = 'index.html');

  updateCartCount();

</script>

</body>
</html>D